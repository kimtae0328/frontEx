<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>함수 실습</title>
    <style>
        table {
            border:3px solid blue;
        }
        #result {
            height:50px;
            font-size:2em;
            font-weight:bold;
            text-align:right;
            border:1px solid black;
            width:210px;
            overflow:hidden;
        }
        button {
            font-size:1.5em;
            font-weight:bold;
            width:50px;
            height:50px;
        }
    </style>
</head>
<body>
    <h1>함수 실습</h1>

    <hr>

    <h3>계산기 만들기(내장 함수 사용)</h3>

    <div>
		<table>
			<tr>
				<!-- 4개의 칸을 하나로 합치겠다!!!! -->
				<td colspan="4">
					<div id="result">123</div>
				</td>
			</tr>
			<tr>
				<td>
					<button onclick="buttonClick(this)"  onclick="buttonClick(this)"  id="left">(</button>
				</td>
				<td>
					<button onclick="buttonClick(this)"  onclick="buttonClick(this)"  id="right">)</button>
				</td>
				<td>
					<button onclick="buttonClick(this)"  id="percent">%</button>
				</td>
				<td>
					<button onclick="buttonClick(this)"  id="clear">AC</button>
				</td>
			</tr>
			<tr>
				<td>
					<button onclick="buttonClick(this)"  id="seven">7</button>
				</td>
				<td>
					<button onclick="buttonClick(this)"  id="eight">8</button>
				</td>
				<td>
					<button onclick="buttonClick(this)"  id="nine">9</button>
				</td>
				<td>
					<button onclick="buttonClick(this)"  id="devide">/</button>
				</td>
			</tr>
			<tr>
				<td>
					<button onclick="buttonClick(this)"  id="four">4</button>
				</td>
				<td>
					<button onclick="buttonClick(this)"  id="five">5</button>
				</td>
				<td>
					<button onclick="buttonClick(this)"  id="six">6</button>
				</td>
				<td>
					<button onclick="buttonClick(this)"  id="astric">*</button>
				</td>
			</tr>
			<tr>
				<td>
					<button onclick="buttonClick(this)"  id="one">1</button>
				</td>
				<td>
					<button onclick="buttonClick(this)"  id="two">2</button>
				</td>
				<td>
					<button onclick="buttonClick(this)"  id="three">3</button>
				</td>
				<td>
					<button onclick="buttonClick(this)"  id="minus">-</button>
				</td>
			</tr>
			<tr>
				<td>
					<button onclick="buttonClick(this)"  id="zero">0</button>
				</td>
				<td>
					<button onclick="buttonClick(this)"  id="dot">.</button>
				</td>
				<td>
					<button onclick="buttonClick(this)"  id="equal">=</button>
				</td>
				<td>
					<button onclick="buttonClick(this)"  id="plus">+</button>
				</td>
			</tr>
		</table>
	</div>
	<script>
		// 선택자를 이용해서 요소를 선택 합니다.
		var result = document.querySelector('#result');
		result.innerHTML = 0;
		// 선택된 요소의 시작태그와 끝태그 사이의 값을 변경하거나 가지고 올때 
		// 값을 초기화후 입력 result.innerHTML = '계산기';
		// 기존값에 연결해서 입력 result.innerHTML += ' 만들기';
		
		function buttonClick(btn){
			console.log("btn", btn);
			// 버튼이 가지고 있는 컨텐츠값(시작태그와 끝태그 사이에 값)을 변수에 저장
			let btnText = btn.innerHTML;
			
			// 1. AC버튼이라면 
			if(btnText == 'AC'){
				// result박스의 값을 0으로 변경
				result.innerHTML = 0;
			}
			// 2. =이 입력된 경우 
			// 		eval() : 문자열을 자바스크립트 코드로 변환해서 실행하는 함수
			else if(btnText == '='){
				try {
					// 예외가 발생할 소지가 있는 문장
					// result박스의 식의 연산 결과를 출력
					result.innerHTML = eval(result.innerHTML);
					
				} catch (error) {
					console.log(error);
					alert(result.innerHTML + ' 식이 올바르지 않습니다.\nac버튼을 이용하여 초기화 해주세요');
				}
			}
			// 3. 그외 버튼인 경우 
			// 		result박스의 값이 0이면 입력된 값을 result박스에 출력
			// 		0이 아니면 기존값에 입력된 값을 연결하여 result박스에 출력
			// 버튼을 클릭 하면 버튼의 시작태그와 끝태그 사이의 값
			else {
				// 만약 result박스의 값이 0이면 버튼의 컨텐츠 값으로 초기화
				if(result.innerHTML == '0'){
					// 기존 입력값을 제거하고 새로운 값으로 대체
					result.innerHTML = btnText;

				// 기존값에 연결해서 작성
				} else {
					// result박스의 시작태그와 끝태그 사이의 값을 변경
					result.innerHTML += btnText;
					//alert('실행' + btn.innerHTML);
				}
				
			}
			
		}

	</script>
</body>
</html>